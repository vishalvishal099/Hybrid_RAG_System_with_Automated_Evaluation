# ChromaDB Hybrid RAG System Configuration

# Embedding Model
embedding:
  model_name: "sentence-transformers/all-mpnet-base-v2"
  dimension: 768
  normalize: true
  batch_size: 32

# ChromaDB Configuration
chromadb:
  persist_directory: "data/chromadb"
  collection_name: "wikipedia_chunks"
  distance_metric: "cosine"  # cosine, l2, ip

# BM25 Configuration
bm25:
  k1: 1.5
  b: 0.75
  
# Retrieval Configuration
retrieval:
  dense:
    top_k: 100
  sparse:
    top_k: 100
  rrf:
    k: 60
    final_top_n: 5

# Generation Model
generation:
  model_name: "google/flan-t5-base"
  max_new_tokens: 180
  min_length: 40
  temperature: 0.7
  top_p: 0.9
  num_beams: 3
  no_repeat_ngram_size: 3
  length_penalty: 1.2

# Data Configuration
data:
  corpus_file: "data/corpus.json"
  questions_file: "data/questions_100.json"
  evaluation_file: "data/evaluation_dataset.json"

# FastAPI Configuration
api:
  host: "0.0.0.0"
  port: 8000
  title: "ChromaDB Hybrid RAG API"
  version: "1.0.0"

# Streamlit Configuration
ui:
  port: 8501
  title: "ChromaDB Hybrid RAG System"
  
# Evaluation Configuration
evaluation:
  metrics:
    - "mrr"
    - "recall@10"
    - "answer_f1"
    - "bertscore"
  ablations:
    - "dense_only"
    - "sparse_only"
    - "hybrid"
  rrf_k_values: [40, 50, 60, 70, 80]

# Logging
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
